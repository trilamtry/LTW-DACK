@model IEnumerable<FashionStore.Models.Order>
@{
    ViewBag.Title = "Quản lý Đơn hàng";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
    var cultureInfo = new System.Globalization.CultureInfo("vi-VN");
}

<div class="main-content flex-grow-1 p-3 p-md-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0 text-gray-800">Quản lý Đơn hàng</h1>

        <div class="btn-group">
            <a href="@Url.Action("Index")" class="btn btn-outline-secondary">Tất cả</a>
            <a href="@Url.Action("Index", new { status = "PENDING" })" class="btn btn-outline-warning">Chờ xử lý</a>
            <a href="@Url.Action("Index", new { status = "SHIPPING" })" class="btn btn-outline-info">Đang giao</a>
            <a href="@Url.Action("Index", new { status = "COMPLETED" })" class="btn btn-outline-success">Hoàn thành</a>
            <a href="@Url.Action("Index", new { status = "CANCELLED" })" class="btn btn-outline-danger">Đã hủy</a>
        </div>
    </div>

    <div class="card shadow mb-4">
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-hover mb-0">
                    <thead class="table-light">
                        <tr>
                            <th>Mã Đơn</th>
                            <th>Khách hàng</th>
                            <th>Ngày đặt</th>
                            <th>Tổng tiền</th>
                            <th>Trạng thái</th>
                            <th>Thao tác</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            string badgeClass = "bg-secondary";
                            string statusLabel = item.Status;

                            switch (item.Status)
                            {
                                case "PENDING": badgeClass = "bg-warning text-dark"; statusLabel = "Chờ xử lý"; break;
                                case "SHIPPING": badgeClass = "bg-info text-white"; statusLabel = "Đang giao"; break;
                                case "COMPLETED": badgeClass = "bg-success"; statusLabel = "Hoàn thành"; break;
                                case "CANCELLED": badgeClass = "bg-danger"; statusLabel = "Đã hủy"; break;
                            }

                            <tr>
                                <td class="fw-bold">@item.OrderCode</td>
                                <td>
                                    @item.CustomerName<br />
                                    <small class="text-muted">@item.Phone</small>
                                </td>
                                <td>@item.CreatedAt.ToString("dd/MM/yyyy HH:mm")</td>
                                <td class="fw-bold text-primary">@item.TotalAmount.ToString("N0", cultureInfo) đ</td>
                                <td><span class="badge @badgeClass">@statusLabel</span></td>
                                <td>
                                    <a href="@Url.Action("Details", new { id = item.OrderId })" class="btn btn-sm btn-primary">
                                        <i class="bi bi-eye"></i> Chi tiết
                                    </a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>